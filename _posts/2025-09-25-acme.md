---
layout: post
title:  "Creating wildcard certs with acme.sh"
date:  2025-09-25 17:42:25 -0700
categories: web, certs, security
---
## Creating certs with acme.sh

e.g. creating certs for example.net, and *.example.net

Reference: https://github.com/acmesh-official/acme.sh

### Automatic validation (needs appropriate permissions on Route53)
```
docker run --rm \
  -e AWS_ACCESS_KEY_ID="YOUR_AWS_KEY" \
  -e AWS_SECRET_ACCESS_KEY="YOUR_AWS_SECRET" \
  neilpang/acme.sh \
  --issue \
  --dns dns_aws \
  -d '*.example.net' \
  -d example.net \
  --server letsencrypt \
```

#### Install certificate into AWS ACM

This makes the certificate usable in AWS infra (ELB, CloudFront, API Gateway, EKS)

```
docker run --rm \
  -e AWS_ACCESS_KEY_ID="YOUR_AWS_KEY" \
  -e AWS_SECRET_ACCESS_KEY="YOUR_AWS_SECRET" \
  neilpang/acme.sh \
  --install-cert \
  -d '*.example.net' \
  --deploy-hook aws
```

#### Automatic renewal with cronjob
```
0 0 * * * docker run --rm \
  -v /path/to/acme-data:/acme.sh \
  -e AWS_ACCESS_KEY_ID="YOUR_AWS_KEY" \
  -e AWS_SECRET_ACCESS_KEY="YOUR_AWS_SECRET" \
  neilpang/acme.sh \
  --cron \
  --home /acme.sh
```

### Manual issue/validation

```
acme.sh --issue --dns -d '*.example.net' -d example.net --keylength 4096 --server letsencrypt --yes-I-know-dns-manual-mode-enough-go-ahead-please 
```

This will prompt you to create TXT records in your top level domain DNS. Once those are created, run

```
acme.sh --issue --dns -d '*.example.net' -d example.net --keylength 4096 --server letsencrypt --yes-I-know-dns-manual-mode-enough-go-ahead-please --renew
```